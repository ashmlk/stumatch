{% load static %}
{% load crispy_forms_tags %}
{% load socialaccount %}
{% providers_media_js %}
<!DOCTYPE html>
<html>
<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-180528762-1"></script>
  <script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-180528762-1');</script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JoinCampus - Sign up</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'EasyAutoComplete/easy-autocomplete.min.css' %}">    
  <link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicon_folder/apple-touch-icon.png' %}">
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicon_folder/favicon-32x32.png' %}">
  <link rel="manifest" href="{% static 'favicon_folder/site.webmanifest' %}">
  <link rel="mask-icon" href="{% static 'favicon_folder/safari-pinned-tab.svg' %}" color="#90c4f5">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" href="{% static 'css/main.css' %}"/>
  <style>
    #signup-submit-button:disabled{
      opacity: 0.5 !important;
      cursor: default;
    }
    .google-icon {
    margin-left: 10px;
    width: 22px !important;
    height: 22px !important;
    }
  .pass-eye, .bi-x-circle, .bi-check-circle, .spinner-border, #username-suggester {
    cursor: pointer;
    position: absolute;
    display: inline-block;
    right: 0;
    position: relative;
    margin-left: -28px;
    z-index: 9999 !important;
    text-align: right !important;
  }

  #username-suggester  {
    right: 2px;
  }

  #username-suggester:hover {
    opacity: 0.85;
  }

  .suggester-included .bi-x-circle {
    right: 16px !important;
  }

  .suggester-included .bi-check-circle {
    right: 16px !important;
  }

  .facebook-icon {
    margin-left: 10px;
    width: 24px !important;
    height: 24px !important;
  }
  .sign-login-card {
    width: 350px;
    padding-left: 2.3rem;
    padding-right: 2.3rem;
  }
  .form-group {
    height: auto !important;
    padding-bottom: 0px !important;
    margin-bottom: 7px !important;
  }

  .div-form-control {
    position: relative;
  }
.div-form-control .input-label-span {
  pointer-events: none;
  position:absolute;
  left:12px;
  top:7px;
  transition: 0.2s;
  transition-timing-function: ease;
  transition-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
  opacity:0.5;
}

.div-form-control input:focus ~ .input-label-span, input:not(:placeholder-shown) ~ .input-label-span{
  opacity:1;
  font-size: 11px;
  top:-8px;
  font-weight: 500;
  background-color: white !important;
  color: #487be0;
}

.div-form-control input[type="text"]:focus ~ .input-label-span,input[type="password"]:focus ~ .input-label-span, input:not(:placeholder-shown) ~ .input-label-span{
  opacity:1;
  font-size: 11px;
  top:-8px;
  font-weight: 500;
  background-color: white !important;
  color: #487be0;
}


/* For IE Browsers*/
.div-form-control input:focus ~ .input-label-span, input:not(:-ms-input-placeholder) ~ .input-label-span {
  opacity:1;
  font-size: 11px;
  background-color: white !important;
  color: #487be0;
}

</style>
</head>
<body class="d-flex flex-column min-vh-100 bg-background">
  <div class="wrapper">
    <div class="container">
      <div class="row d-flex justify-content-center">
          <div class="col-md-6 col-sm-11 col-11">
              <div class="form pt-5 mt-2 d-flex justify-content-center">
                  <div class="box py-2 card sign-login-card">
                    <div class="d-flex justify-content-center">
                        <div class="is-responsive my-auto mx-auto">
                          <div class="my-4">
                            <a href="{% url 'main:user_login' %}">
                              <div class="d-flex my-auto justify-content-center align-items-center">
                                <div class="logo-name">
                                  <img class="img-fluid" src="{% static 'logo/m/logo-name.png' %}"/>
                                </div>
                              </div>
                            </a>          
                            <h6 class="text-center mt-3 mx-0" style="color:rgb(90, 90, 90);font-weight: 530;">Start connecting with students and discover courses</h6>
                          </div>
                        </div>
                      </div>
                      <div class="d-flex justify-content-center">
                        <div class="signup-form">
                          <form enctype="multipart/form-data" method="POST" action="{% url 'main:signup' %}">
                            {% csrf_token %}
                            <div class="form-fields">
                                <div id="div_id_email" class="form-group" > 
                                  <div class="d-flex align-items-center email-flex input-fields div-form-control"> 
                                    <input type="email" name="email" placeholder=" " maxlength="200" class="emailinput form-control" required id="id_email" style="z-index: 2 !important;"> 
                                    <span class="input-label-span"style="z-index: 3 !important;">Email</span>
                                  </div> 
                                </div> 
                                <div id="div_id_username" class="form-group"style="z-index: 1 !important;"> 
                                  <div class="d-flex align-items-center username-flex input-fields div-form-control"> 
                                    <input type="text" name="username"  placeholder=" " maxlength="30" minlength="1" class="textinput textInput form-control" required id="id_username"> 
                                    <span class="input-label-span" style="z-index: 1 !important;">Username</span>
                                  </div> 
                                </div> 
                                <div id="div_id_university" class="form-group" id="id_university" > 
                                  <div class=""  id="id_university"> 
                                    <select name="university" class="myselect form-control" id="id_university"  style="position: relative;z-index: 2 !important;"> 
                                      <optgroup label="Incoming Student"> 
                                        <option value="Incoming Student">Incoming Student</option> </optgroup> <optgroup label="University"> <option value="" selected="" disabled="disabled">University</option> <option value="Acadia University">Acadia University</option> <option value="Alberta University of the Arts">Alberta University of the Arts</option> <option value="Algoma University">Algoma University</option> <option value="Athabasca University">Athabasca University</option> <option value="Atlantic School of Theology">Atlantic School of Theology</option> <option value="Bishop's University">Bishop's University</option> <option value="Booth University College">Booth University College</option> <option value="Brandon University">Brandon University</option> <option value="Brock University">Brock University</option> <option value="Canadian Mennonite University">Canadian Mennonite University</option> <option value="Cape Breton University">Cape Breton University</option> <option value="Capilano University">Capilano University</option> <option value="Carleton University">Carleton University</option> <option value="Concordia University">Concordia University</option> <option value="Crandall University">Crandall University</option> <option value="Dalhousie University">Dalhousie University</option> <option value="Emily Carr University of Art and Design">Emily Carr University of Art and Design</option> <option value="Fairleigh Dickinson University">Fairleigh Dickinson University</option> <option value="Institut national de la recherche scientifique">Institut national de la recherche scientifique</option> <option value="Kingswood University">Kingswood University</option> <option value="Kwantlen Polytechnic University">Kwantlen Polytechnic University</option> <option value="Lakehead University">Lakehead University</option> <option value="Laurentian University">Laurentian University</option> <option value="MacEwan University">MacEwan University</option> <option value="McGill University">McGill University</option> <option value="McMaster University">McMaster University</option> <option value="Memorial University of Newfoundland">Memorial University of Newfoundland</option> <option value="Mount Allison University">Mount Allison University</option> <option value="Mount Royal University">Mount Royal University</option> <option value="Mount Saint Vincent University">Mount Saint Vincent University</option> <option value="New York Institute of Technology">New York Institute of Technology</option> <option value="Niagara University">Niagara University</option> <option value="Nipissing University">Nipissing University</option> <option value="Nova Scotia College of Art and Design University">Nova Scotia College of Art and Design University</option> <option value="Ontario College of Art and Design University">Ontario College of Art and Design University</option> <option value="Ontario Tech University">Ontario Tech University</option> <option value="Queen's University at Kingston">Queen's University at Kingston</option> <option value="Quest University">Quest University</option> <option value="Redeemer University College">Redeemer University College</option> <option value="Royal Military College of Canada">Royal Military College of Canada</option> <option value="Royal Roads University">Royal Roads University</option> <option value="Ryerson University">Ryerson University</option> <option value="Saint Francis Xavier University">Saint Francis Xavier University</option> <option value="Saint Mary's University">Saint Mary's University</option> <option value="Simon Fraser University">Simon Fraser University</option> <option value="St. Stephen's University">St. Stephen's University</option> <option value="St. Thomas University">St. Thomas University</option> <option value="The King's University">The King's University</option> <option value="Thompson Rivers University">Thompson Rivers University</option> <option value="Trent University">Trent University</option> <option value="Trinity Western University">Trinity Western University</option> <option value="Tyndale University">Tyndale University</option> <option value="University Canada West">University Canada West</option> <option value="University College of the North">University College of the North</option> <option value="University of Alberta">University of Alberta</option> <option value="University of British Columbia">University of British Columbia</option> <option value="University of Calgary">University of Calgary</option> <option value="University of Fredericton">University of Fredericton</option> <option value="University of Guelph">University of Guelph</option> <option value="University of King's College">University of King's College</option> <option value="University of Lethbridge">University of Lethbridge</option> <option value="University of Manitoba">University of Manitoba</option> <option value="University of New Brunswick">University of New Brunswick</option> <option value="University of Northern British Columbia">University of Northern British Columbia</option> <option value="University of Ottawa">University of Ottawa</option> <option value="University of Prince Edward Island">University of Prince Edward Island</option> <option value="University of Regina">University of Regina</option> <option value="University of Saskatchewan">University of Saskatchewan</option> <option value="University of Toronto">University of Toronto</option> <option value="University of Victoria">University of Victoria</option> <option value="University of Waterloo">University of Waterloo</option> <option value="University of Western Ontario">University of Western Ontario</option> <option value="University of Windsor">Universityof Windsor</option> <option value="University of Winnipeg">University of Winnipeg</option> <option value="University of the Fraser Valley">University of the Fraser Valley</option> <option value="Université Laval">Université Laval</option> <option value="Université Sainte-Anne">Université Sainte-Anne</option> <option value="Université de Moncton">Université de Moncton</option> <option value="Université de Montréal">Université de Montréal</option> <option value="Université de Sherbrooke">Université de Sherbrooke</option> <option value="Université de l'Ontario français">Université de l'Ontario français</option> <option value="Université du Québec en Abitibi-Témiscamingue">Université du Québec en Abitibi-Témiscamingue</option> <option value="Université du Québec en Outaouais">Université du Québec en Outaouais</option> <option value="Université du Québec à Chicoutimi">Université du Québec à Chicoutimi</option> <option value="Université du Québec à Montréal">Université du Québec à Montréal</option> <option value="Université du Québec à Rimouski">Université du Québec à Rimouski</option> <option value="Université du Québec à Trois-Rivières">Université du Québec à Trois-Rivières</option> <option value="Vancouver Island University">Vancouver Island University</option> <option value="Wilfrid Laurier University">Wilfrid Laurier University</option> <option value="York University">York University</option> <option value="Yukon University">Yukon University</option> <option value="École de technologie supérieure">École de technologie supérieure</option> <option value="École nationale d'administration publique">École nationale d'administration publique</option> </optgroup>
                                    </select> 
                                  </div> 
                            </div> 
                            <div id="div_id_password1" class="form-group" style="z-index: -11 !important;"> 
                              <div class="d-flex align-items-center password-flex input-fields div-form-control"> 
                                <input type="password" name="password1" placeholder=" " id="password-input-field" maxlength="30" minlength="8" class="textinput textInput form-control" required 
                                style="position: relative;">
                                <span class="input-label-span" style="z-index: 1;">Password</span>
                                <i class="far fa-eye pass-eye text-muted" id="togglePassword" aria-hidden="true"></i> 
                              </div> 
                            </div>                    
                            </div>
                            <div class="mt-2">
                              <div class="small text-danger" id="validation-messages"></div>
                              <div class="small text-danger" id="validation-messages-email"></div>
                              <div class="mt-3  w-100">
                                <button type="submit" id="signup-submit-button" class="w-100 btn btn-primary"><span style="font-weight: 500;" >Sign up</span></button>
                              </div>
                              <div class="mt-2 separator-line" style="color: rgb(182, 184, 185);">or</div>
                              <a class="btn mt-2 w-100 btn-md border rounded d-flex align-items-center justify-content-between" href="{% provider_login_url 'google' %}">
                                <img style="margin-left: 10px;width: 22px;height: 22x;" class="google-icon float-left" src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg"/>
                                <span style="margin-left:-11px;font-weight: 500;">Log in with Google</span>
                                <div></div>
                              </a>
                              <a class="btn mt-2 w-100 btn-md border rounded  d-flex align-items-center justify-content-between"  href='{% provider_login_url "facebook" method="js_sdk" %}'>
                                <img class="facebook-icon float-left" src="{% static 'logo/fb_logo_58.png' %}"/><span style="margin-left:-11px;font-weight: 500;">Log in with Facebook</span>
                                <div></div>
                              </a>
                              <div class=" mt-4 text-center mb-3 text-muted small">
                                  By clicking Sign up, you agree to our <a class="text-primary" href="{% url 'main:site-terms' %}">Terms</a> and <a class="text-primary" href="{% url 'main:web-policy' %}">Data Policy</a>.
                              </div>
                            </div>
                          </form>
                        </div>
                      </div>
                  </div>  
              </div>
              <div class="form mt-2 d-flex justify-content-center">
                <div class="box py-3 card sign-login-card">
                  <div class="d-flex justify-content-center">
                      <div class="my-auto mx-auto">
                        <div class="my-2">       
                          <span class="text-center mx-0" style="color:rgb(90, 90, 90);font-weight: 430; font-size: 0.92rem">Have an account? <a style="color: #487be0;" href="{% url 'main:user_login'  %}">Sign in</a></span>
                        </div>
                      </div>
                    </div>
                </div>
              </div>
          </div>
      </div>
    </div>
  </div>
  <div id="footer-main-div" style="margin-top: 250px;">
    {% include 'footer_main_social.html' %}
  </div>
  
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
  crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<script src="{% static 'EasyAutoComplete/jquery.easy-autocomplete.min.js' %}"></script>
<script src="https://kit.fontawesome.com/d3a3fc2f19.js" crossorigin="anonymous"></script>
<script src="{% static 'initial/initial.js' %}"></script>

<script>
  $(document).ready(function () {

    const loadingCircle = `<div class="spinner-border text-muted small" id="validator-spinner" role="status">
                            <span class="sr-only">Loading...</span>`

    const failTick = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="validator-icons bi bi-x-circle text-danger" viewBox="0 0 16 16">
                          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                          <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                        </svg>`
   
    const successTick = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="validator-icons bi bi-check-circle text-success" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"/>
                      </svg>`

    let usernameSuggestButton = 
    `<span  id="username-suggester" >
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" style="transform: rotate(35deg);background-color:rgba(255,255,255,0);" fill="currentColor" class="bg-transparent bi bi-arrow-repeat" viewBox="0 0 16 16">
        <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
        <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>
      </svg>
      </span>`

    let suggestedUsernames = null;
    let suggestedUsernamesCount = 0;
    let password_input = $('#password-input-field');
    $(password_input).css({"position":"relative"})
    //$('#div_id_password1 div').addClass('d-flex align-items-center password-flex input-fields ');
    //$('#div_id_email div').addClass('d-flex align-items-center email-flex input-fields');
    //$('#div_id_username div').addClass('d-flex align-items-center username-flex input-fields');
    //$(`<i class="far fa-eye pass-eye" id="togglePassword"></i>`).insertAfter(password_input);
    const togglePassword = document.querySelector('#togglePassword');
    const password_input_j = document.getElementById("password-input-field");

    $('#signup-submit-button').attr('disabled', 'disabled'); 
    
    $('.input-fields').on("DOMNodeInserted", function (e){
        let cInput = $(this);
        let eId = e.target.id;
        if(eId == "username-suggester") {
          $('#id_username').closest('.input-fields').addClass('suggester-included');
        }
    })

    $('.input-fields').on("DOMNodeRemoved", function (e){
        let cInput = $(this);
        let elId = e.target.id
        if(elId == "username-suggester") {
          $('#id_username').closest('.input-fields').removeClass('suggester-included');
        }
    })

    togglePassword.addEventListener('click', function (e) {
      // toggle the type attribute
      const type = password_input_j.getAttribute('type') === 'password' ? 'text' : 'password';
      password_input_j.setAttribute('type', type);
      // toggle the eye slash icon
      this.classList.toggle('fa-eye-slash');
    });

    $('.signup-form').on('keyup change', 'input', function() {
      var empty = false;
      $('.signup-form input').each(function() {
          if ($(this).val() == '') {
              empty = true;
          }
      });
      if (empty) {
          $('#signup-submit-button').attr('disabled', 'disabled'); 
      } else {
          $('#signup-submit-button').removeAttr('disabled');
      }
    });

    $(document).on('click','#id_username', function (e){
           $('#div_id_username').find($('.validator-icons')).remove();
      }
    )

    $(document).on('click','#id_email', function (e){
        $('#div_id_email').find($('.validator-icons')).remove();
      }
    )

    $(document).on('focusout','#id_username', function (e){
      let usernameInput = $('#id_username');
      if($(usernameInput).val().length > 0){
        let username = $(usernameInput).val();
        $.ajax({
              url: `/validate_signup?username=${username}`,
              type: 'GET',
              dataType: 'json',
              beforeSend: function() {
                  $('#div_id_username').find($('.validator-icons')).remove();
                  $('#validation-messages').html('');
                  $(loadingCircle).insertAfter(usernameInput);
              },
              success: function(data){
                  $('#validator-spinner').remove();
                  if(data.errors){
                    let i = $('#div_id_username').find($('#username-suggester'))
                    if(i.length){
                      $(failTick).insertAfter($(i));
                    }
                    else {
                      $(failTick).insertAfter($('#id_username'));
                    }
                    $('#validation-messages').html(data.error_message);
                    $(usernameInput).attr("data-username-valid",false);
                  }
                  else{
                    let i = $('#div_id_username').find($('#username-suggester'))
                    if(i.length){
                      $(successTick).insertAfter($(i));
                    }
                    else {
                      $(successTick).insertAfter($('#id_username'));
                    }
                    $(usernameInput).attr("data-username-valid",true);
                  }
              }
          })
        }
        else {
          $('#div_id_username').find($('.validator-icons')).remove();
          $('#validation-messages').html('');
          let i = $('#div_id_username').find($('#username-suggester'))
          if(i.length){
            $(failTick).insertAfter($(i));
          }
          else {
            $(failTick).insertAfter($('#id_username'));
          }
          $(usernameInput).attr("data-username-valid",false);
        }
    })

    $(document).on('focusout','#id_email', function (e){
      let emailInput = $('#id_email');
      if($(emailInput).val().length > 0){
        let email = $(emailInput).val();
        $.ajax({
              url: `/validate_signup?email=${email}`,
              type: 'GET',
              dataType: 'json',
              beforeSend: function() {
                  $('#div_id_email').find($('.validator-icons')).remove();
                  $('#validation-messages-email').html('');
                  $(loadingCircle).insertAfter(emailInput);
              },
              success: function(data){
                  $('#validator-spinner').remove();
                  if(data.errors){
                    suggestUsername("remove");
                    $(failTick).insertAfter(emailInput);
                    $('#validation-messages-email').html(data.error_message);
                    $(emailInput).attr("data-email-valid",false);
                  }
                  else{
                    $('#validation-messages').html('');
                    $(successTick).insertAfter(emailInput);
                    $(emailInput).attr("data-email-valid",true);
                    suggestUsername("add");
                  }
              }
          })
        }
        else {
          suggestUsername("remove");
          $('#div_id_email').find($('.validator-icons')).remove();
          $('#validation-messages-email').html('');
          $(failTick).insertAfter(emailInput);
          $(emailInput).attr("data-email-valid",false);
        }
    })

    $(document).on('click','#username-suggester', function (e){
      let emailInputValue = $('#id_email').val();
      if(suggestedUsernamesCount < 8 && suggestedUsernames != null){
        $('#id_username').val(suggestedUsernames[suggestedUsernamesCount]);
        suggestedUsernamesCount++;
        $('#id_username').attr("data-suggested-server", true);
        $('#validation-messages').html('');
        if($('#id_username').attr('data-suggested-server') == "true"){
            $('#div_id_username').find($('.validator-icons')).remove();
            let i = $('#div_id_username').find($('#username-suggester'))
            $(successTick).insertAfter($(i));
        }
      }
      else {
        $.ajax({
              url: `/validate_signup?action=suggest-username&email_value=${emailInputValue}`,
              type: 'GET',
              dataType: 'json',
              beforeSend: function(e){
                suggestedUsernamesCount = 0;
              },
              success: function(data){
                suggestedUsernames = data.suggested_usernames;
                $('#id_username').val(suggestedUsernames[0]);
                suggestedUsernamesCount++;
                $('#id_username').attr("data-suggested-server", true);
                $('#validation-messages').html('');
                if($('#id_username').attr('data-suggested-server') == "true"){
                   $('#div_id_username').find($('.validator-icons')).remove();
                   let i = $('#div_id_username').find($('#username-suggester'))
                   $(successTick).insertAfter($(i));
                }
              }
          })
      }
   
    })

    function suggestUsername(action=null){
      let usernameInput = $('#id_username');
      if(!$('#username-suggester').length) {
        if($('#id_email').attr('data-email-valid') == "true"){
          $(usernameSuggestButton).attr('data-email',$('#id_email').val());
          if($('#div_id_username').find('.validator-icons').length){
            let i =$('#div_id_username').find('.validator-icons');
            $(usernameSuggestButton).insertBefore($(i));
          }
          else {
            $(usernameSuggestButton).insertAfter(usernameInput);
          }
        }
      }
      if(action === 'remove') {
        $('#username-suggester').remove();
      }
    }
  
  })
</script>
</html>