{% extends 'main/settings/base_setting.html' %}
{% block content %}
<div class="mb-3 border-bottom setting-menu-sub">
  <h5>Edit Profile</h5>
</div>
<div class="edit-pro-all">
  <div class="d-flex justify-content-center pro-img-ctr">
    <div class="ml-2 mt-1 mb-3 change-image-rmv">
      {% if image_not_default %}
      <form method="POST"  class="submit-img-pro-form" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="image" accept="image/*" id="id_image">
        <div class="mt-2 d-flex justify-content-center">
          <div>
            <div class="d-flex justify-content-center mb-2">
              <img class="img-create-post rounded-circle" style="height: 8rem;width: 8rem;" src="{{ request.user.image.url }}"/>
            </div>
            <div id="updtimgbtn" style="margin-left: 10px;" class="d-flex justify-content-center"></div>
            <div class="d-flex justify-content-center">
              <button type="button"  id="chppbtn" class="btn no-border no-outline edit-profile-clickable text-primary">
                Change Profile Picture
              </button>
            </div>
            <div id="remrevctr" class="d-flex justify-content-center">
              <button data-url="{% url 'main:remove-image' hid=request.user.get_hashid %}" type="button" id="rmvproimg" class="btn no-border no-outline edit-profile-clickable text-danger">
                Remove Profile Picture
              </button>
            </div>
          </div> 
        </div>
      </form>
      {% else %}
      <form method="POST" class="submit-img-pro-form" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="image" accept="image/*" id="id_image">
        <div class="mt-2 d-flex justify-content-center">
          <div>
            <div class="d-flex justify-content-center mb-2">
              <img class="img-create-post rounded-circle" style="height: 8rem;width: 8rem;" src="{{ request.user.image.url }}"/>
            </div>
            <div id="updtimgbtn" style="margin-left: 10px;" class="d-flex justify-content-center"></div>
            <div style="margin-left: 10px;"class="d-flex justify-content-center">
              <button type="button" id="chppbtn" class="btn no-border no-outline text-center mr-3 edit-profile-clickable text-primary">
                Change Profile Picture
              </button>
            </div>
            <div id="remrevctr" class="d-flex justify-content-center"></div>
          </div> 
        </div>
      </form>
      {% endif %}
    </div>
  </div>
  <form method="POST" action="{% url 'main:settings-edit' %}" enctype="multipart/form-data">
    {% csrf_token %}
    {% for field in form.hidden_fields %}
    {{ field }}
    {% endfor %}
    {% for field in form.visible_fields %}
    <div class="my-2 row align-items-center d-flex">
      <div class="col-sm-2">
        <span class="text-muted">
          {{ field.label }}
        </span>
      </div>
      <div class="field-main-pro col-sm-9 w-100">
        {{ field }}
      </div>
    </div>  
    {% endfor %}
    <div class="mt-4 d-flex justify-content-end col-12" style="margin-left:20px !important;border-radius: 20px; ">
      <button type="submit" class="btn btn-md no-border btn-primary"  style="border-radius: 20px; ">Save</button>
    </div>
  </form>
</div>  
{% endblock %}