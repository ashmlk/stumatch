{% extends "home/homepage/base.html" %}
{% load crispy_forms_tags %}
{% load ibuilder %}
{% load static %}
{% block title %}
{% load thumbnail %}
<title>Home - JoinCampus</title>
{% endblock %}
{% block content %}
{% if is_tag %}
<div class="rounded-0 ml-1 card">
  <div class="card-body">
    <div class="d-flex justify-content-between">
      <div>
        <h4 class="card-title">#{{ tag.name }}</h4>
      </div>
      <div class="text-muted">
        <span>{{ num_obj|num_format }} {{ s }}</span>
      </div>
    </div>
    <div class="mt-1 related">
      <div class="d-flex align-items-center justify-content-between">
        <div class="d-flex">
          <div style="margin-top: 0.2rem;">
            <h6 class="text-muted small card-subtitle">Related:
              <span class="related-tags">
                {% for tag in related_tags %}
                <span class="mr-1">
                  <a href="{% url 'home:tag-post' tag.slug %}" class="text-dark"
                    style="text-decoration: none;">#{{ tag.name }}</a>
                </span>
                {% endfor %}
              </span>
            </h6>
          </div>
        </div>
        <div class="flw-tag-ctr" style="margin: -0.6rem;">
          {% include 'main/tags/fav_post.html' with tag=tag %}
        </div>
      </div>
    </div>
  </div>
</div>
{% else %}
<div class="pl-1 pr-1">
    <div class="w-100 d-flex m-1" >
      <div class="mt-2">
        {% thumbnail request.user.image "60x60" crop="80% top" as im %}
        <img class="rounded-circle" style="margin:{{ im|margin:'60x60' }}" src="{{ im.url }}" width="{{ im.x }}" height="{{ im.y }}">
        {% endthumbnail %}
      </div>
      <div class="w-100 d-flex align-items-center">
        <div class="ml-1 mt-2 w-100 border" style="border-radius: 25px;">
          <input type="text" readonly="readonly"
            class="bg-transparent form-control bg-transparent create-post-btn input-no-border"
            placeholder="What's new?" data-url="{% url 'home:post-create' %}">
        </div>
      </div>
    </div>
</div>
<div class="mt-3 mb-2 p-1 ml-1 ">
  <div class="d-flex justify-content-start" id="_pol3">
    <div class="btn d-flex align-items-center mr-1 menu-link menu-link{{home_active}}">
      <a  href="{% url 'home:home' %}" style="text-decoration: none;">
        <div>
          <span class="h6"><span >Feed</span></span>
        </div>
      </a>
    </div>
    <div class="btn d-flex align-items-center mr-1 menu-link menu-link{{ top_active }}"
      data-url="{% url 'home:top-posts' %}" >
      <a  href="{% url 'home:top-posts' %}" style="text-decoration: none;">
        <div>
          <span class="h6">
            <span >Top</span></span>
        </div>
      </a>
    </div>
    <div class="btn d-flex align-items-center mr-1 menu-link menu-link{{ hot_active }}"
      data-url="{% url 'home:hot-posts' %}" >
      <a  href="{% url 'home:hot-posts' %}" style="text-decoration: none;">
        <div>
          <span class="h6"><span >Hot</span></span>
        </div>
      </a>
    </div>
    {% if request.session.no_university %}
    <button class="btn d-flex align-items-center mr-1 add-uni-btn" data-url="{% url 'main:update-university' %}?success_url=home">
        <div>
          <span class="h6"><span style="white-space: nowrap !important;">Add University</span></span>
        </div>
    </button>
    {% else %}
    <div class="btn d-flex align-items-center mr-1 menu-link menu-link{{ uni_active }}" data-url="{% url 'home:uni-posts' %}">
      <a  href="{% url 'home:uni-posts' %}" style="text-decoration: none;">
        <div>
          <span class="h6"><span >{{ request.user.university }}</span></span>
        </div>
      </a>
    </div>
    {% endif %}
  </div>
</div>
{% endif %}
{% if no_post_message %}
  {% if not discover_students %}
    <div class="ml-2 text-muted btn btn-light btn-sm">
      <span class="small">{{ no_post_message }}</span>
    </div>
  {% endif %}
{% endif %}
{% if no_friends_and_university %}
<div id="welcome_cards_container">
  <div class="d-flex justify-content-center" style="z-index:-1;">
    <div class="w-75">
      {% include 'slider/slider.html' %}
    </div>
  </div>
</div>
{% elif discover_students %}
<div id="welcome_cards_container">
  <div class="d-flex justify-content-center" style="z-index:-1;">
    <div class="w-75">
      {% include 'slider/slider_discover_students.html' %}
    </div>
  </div>
</div>
{% endif %}
<div id="post-list">
  <div class="pb-5">
    {% include 'home/posts/home_post.html' %}
  </div>
</div>
<script src="{% static 'js/post/post.js' %}"></script>
{% endblock content %}
{% block item %}
{% if is_home %}
{% if tags or words %}
<div class="le_m_bx">
  <div class="card border-0" style="background-color: rgba(210, 230, 248, 0.356); border-radius: 20px;">
    <div class="content-holder">
      <div class="pl-3 pr-3 pt-3 border-bottom">
        <div>
          <h5 class="font-weight-bolder card-title">Trending</h5>
        </div>
      </div>
      <div id="menureform">
        {% for tag in tags %}
        <div class="shdv" data-url="{% url 'home:tag-post' tag.slug %}"
          class="trending-box-r pl-3 pr-3 pb-1 pt-2 border-bottom">
          <div class="trending-box-r pl-4 pr-3 pb-2 pt-3 border-bottom">
            <a href="{% url 'home:tag-post' tag.slug %}" class="text-dark"><strong>#{{ tag.name }}</strong></a>
            <br>
            <span class="card-subtitle small">{{ tag.num_times|num_format }} Posts</span>
          </div>
          
        </div>
        {% endfor %}
        {% for word in words %}
        <div class="shdv mnpgl search-btn" data-target="sd3f0v">
          <form id="sd3f0v" action="{% url 'home:top-word-post' %}" method="GET"
            class="strending-box-r pl-3 pr-3 pb-1 pt-2 border-bottom">
            <input name="w" value="{{ word }}" type="hidden" />
            <div>
              <span class="text-muted mx-2 my-0 small">Trending in posts</span>
            </div>
            <button class="btn btn-md no-border no-outline" type="submit">
              <strong>{{ word|capfirst }}</strong>
            </button>
          </form>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="pl-3 pr-3 pb-1 pt-1 m-1"></div>
  </div>
</div>
{% endif %}
{% endif %}
{% endblock %}