{% extends "home/homepage/base.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}
  <style>
    .modal-body {
      min-height: calc(100vh - 510px);
      overflow-y: auto;
    }
    .post-border-div {
      border: 1px solid; 
      opacity: 0.5;
    }
  </style>
  <script src="{% static 'js/comment.js' %}"></script>
  <script src="{% static 'js/like-api.js' %}"></script>
  <link rel="stylesheet" href="{% static 'css/post/style.css' %}">
  <div class="border-left border-right">
    <div class="mx-0" style="margin: 0; padding: 0;">
      <div class="mt-3 rounded-0" style="max-width: 100rem !important;">
        <div class="card-body mb-1 text-dark" style="min-height: 20rem;">
          <div class="d-flex">
            <img class="img-create-post rounded-circle mr-2" style="width: 50px;height: 50px;" src="https://mdbootstrap.com/img/Photos/Avatars/avatar-5.jpg"
              alt="Profile image">
              <span class="align-text-top"><a class="mr-2 text-dark font-weight-bolder" href="#">{{ post.author.first_name }} {{ post.author.last_name }} </a><br><p class="font-weight-light text-muted">{{ post.title }}</p></span>
                <div class="float-right text-right ml-auto">
                  <p class="text-muted small" style="font-size: 0.7rem;">{{ post.date_posted|date:"F d, Y" }}</p>
                </div>     
          </div>
          <div class="card-post-content">
            <p class="card-text">{{ post.content }}</p>
          </div>
        </div>
      </div>
      <hr class="mx-2 px-2">
      <div class="d-flex justify-content-center">
        <div class="mr-4">
          <button class="btn btn-sm" type="button" id="post-comment-button-viewer">
            <span class="text-primary">
                <i class="fas fa-comment-alt"></i>
            </span>
        </button>
        </div>
        <div id="like-section" class="ml-4 inside-post-detail">
          {% include 'home/posts/likes.html' with post=post %}
        </div>
      </div>
        <div class="d-flex justify-content-center py-0 mx-0">
          <div class="row mx-2" id="post-comment-form-div" style="display:none;">
            <img class="img-create-post rounded-circle mx-1" style="width: 2.3rem;height: 2.3rem;" src="{{ request.user.image }}" alt="Profile image">
            <form method="POST" action="{% url 'home:post-detail' post.id %}" class="post-comment-form" style="height: 1rem;">
              {% csrf_token %}
              <div class="input-group">
                {{ form | crispy }}
                <span><button class="btn btn-sm ml-1 small btn-rounded btn-primary" style="height: 2.3rem; border-radius: 2rem;" type="submit">Add</button></span>
              </div>     
            </form>
          </div>
        </div>
        <hr class="text-muted post-border-div">
        <div id="post-linked-comments">
          <div>
            {% include 'home/posts/post_comment.html' %}
          </div>    
        </div>
    </div>
  </div>
  <div class="modal fade" id="modal-post" style="overflow-y: show;">
    <div class="modal-dialog">
      <div class="modal-content"></div>
    </div>
  </div> 
  <style>
    #like-count {
      display: none;
    }
  </style>
{% endblock %}

  